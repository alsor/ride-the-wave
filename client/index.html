<script src="/socket.io/socket.io.js"></script>
<script>
  var socket = io.connect('http://localhost');

  var isReady = false;

  function send_message(text) {
    if (isReady) {
      socket.emit('message', text);
    } else {
      console.error("chat is not ready yet, please set your nickname");
    }
  }

  function set_nickname(name) {
    socket.emit('set nickname', name);
  }

  socket.on('ready', function() {
    isReady = true;
  });

  socket.on('message', function(message) {
    console.log(message); 
  });
</script>
